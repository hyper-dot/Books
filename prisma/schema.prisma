// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Item {
  item_id   BigInt                @id @default(autoincrement())
  item_name String
  stock     Int?                  @default(0)
  purchases PurchaseTransaction[]
}

model PurchaseTransaction {
  transaction_item_id BigInt   @id @default(autoincrement())
  qty                 Int
  unit_price          Int
  item_id             BigInt   @unique
  purchase_id         BigInt   @unique
  item                Item     @relation(fields: [item_id], references: [item_id])
  purchase            Purchase @relation(fields: [purchase_id], references: [purchase_id])
}

model Purchase {
  purchase_id     BigInt                @id @default(autoincrement())
  purchase_date   DateTime              @default(now())
  supplier_id     BigInt
  total_amount    Float
  discount        Float
  partial_payment Float?
  total_cost      Float
  purchase_type   String
  supplier        Supplier              @relation(fields: [supplier_id], references: [supplier_id])
  transactions    PurchaseTransaction[]
}

model Supplier {
  supplier_id    BigInt     @id @default(autoincrement())
  supplier_name  String     @unique
  contact_no     String
  amount_payable Float
  address        String
  vat_no         String     @unique
  purchases      Purchase[]
}

model Customer {
  customer_id       BigInt @id @default(autoincrement())
  customer_name     String @unique
  contact_no        String
  amount_receivable Float
  address           String
  vat_no            String @unique
  sales             Sale[]
}

model Sale {
  sales_id      BigInt   @id @default(autoincrement())
  sales_date    DateTime @default(now())
  customer_id   BigInt
  total_amount  Float
  discount      Float
  total_revenue Float
  sales_type    String
  customer      Customer @relation(fields: [customer_id], references: [customer_id])
}

model CashAccount {
  transaction_id   BigInt   @id @default(autoincrement())
  transaction_date DateTime @default(now())
  description      String
  amount           Float
  transaction_type String
}
